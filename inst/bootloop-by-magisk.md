---
description: >-
  Расскажем, что делать если произошел бутлуп из-за magisk модуля и как
  предостеречься от этого.
---

# Bootloop из-за Magisk модуля

{% hint style="danger" %}
<mark style="color:red;">**Автор данной инструкции не несёт ответственности за ваши действия. Все ваши действия выполняются на ваш страх и риск.**</mark>
{% endhint %}

{% hint style="info" %}
Что делать, если попали в бутлуп из-за "нежелательного" модуля magisk? Сейчас рассмотрим 4 способа выйти из этой ситуации
{% endhint %}



## 1. Безопасный режим

> _Актуально начиная с Magisk Canary \[20414]_

Безопасный режим — это режим, в котором Magisk отключает все модули, что позволяет выйти из бутлупа и загрузиться в систему. Метод не 100%, но достаточно эффективный.

Чтобы попасть в безопасный режим надо:

1. Как только появится бутанимация (именно анимация, а не статичное лого загрузчика) зажмите кнопку громкости вниз (-) и удерживайте до попадания в систему
2. Удалите нежелательный модуль и перезагрузите устройство.



## 2. Ручное удаление через TWRP

### Шифрование внутреннего хранилища <a href="#esli-vashe-vnutrennee-khranilishe-zashifrovano-to-etot-metod-vam-ne-podoidyot." id="esli-vashe-vnutrennee-khranilishe-zashifrovano-to-etot-metod-vam-ne-podoidyot."></a>

{% hint style="warning" %}
Этот способ будет работать только в том случае, если ваше внутренне хранилище расшифровано. Как это проверить?

1. Если вы не можете открыть раздел «Внутреннее хранилище» в разделе «Установка» внутри twrp, то ваше внутреннее хранилище <mark style="color:red;">зашифровано</mark>
2. Если в разделе «Установка» внутри twrp в разделе «Внутреннее хранилище» вместо нормальных названий папок вы видите непонятный набор символов, то ваше внутреннее хранилище <mark style="color:red;">зашифровано</mark>
3. Если в разделе «Установка» внутри twrp у вас в разделе «Внутреннее хранилище» нормальное отображение папок, то ваше внутреннее хранилище <mark style="color:green;">расшифровано</mark>
{% endhint %}



### Удаление модуля

{% tabs %}
{% tab title="Текст" %}
1. Перезагружаемся в TWRP
2. Раздел «Дополнительно»
3. Кнопка «Проводник»
4. Далее идем по пути: `/data/adb/modules`
   * Здесь расположены установленные модули magisk. Удаляем модуль, который вызвал проблему и можем перезагружаться в систему.
{% endtab %}

{% tab title="Скриншоты" %}
![](https://telegra.ph/file/9327a71c66dffbc2383f0.jpg)

![](https://telegra.ph/file/3a45d9d8d35797eff4945.jpg)
{% endtab %}
{% endtabs %}



## 3. Удаление с помощью TWRP Script

``[`источник`](https://4pda.to/forum/index.php?showtopic=915158\&view=findpost\&p=109842829)``

> Применять в случае бутлупа после установки очередного модуля.
>
> Скрипт находит крайнюю по времени создания/модифицикации директорию в /data/adb/modules и удаляет её. То есть, говоря по-русски, такой алгоритм находит крайний установленный модуль и сносит его. Если проблема именно в крайнем/последнем (кому как удобнее на слух) модуле, то этот скрипт решает вашу проблему с загрузкой. Каждая новая установка будет удалять самую крайнюю по времени создания/модификации директорию. То есть вторая установка сносит второй по времени модуль, третья - третий и так далее пока не кончатся модули.
>
> В случае если вы установили два модуля за раз и поймали бутлуп, то можете либо прошить скрипт дважды либо прошить раз и попробовать загрузиться.
>
> Скрипт не восстанавливает работоспособность системы, если установленный модуль необратимо удалил системные или иные файлы.

{% hint style="success" %}
<mark style="color:green;">Данный скрипт прошивается в</mark> <mark style="color:red;">TWRP</mark><mark style="color:green;">.</mark>
{% endhint %}

{% tabs %}
{% tab title="Последний модуль по времени" %}
{% file src="../.gitbook/assets/RemoveLastModule.zip" %}
{% endtab %}

{% tab title="Все модули за раз" %}
{% file src="../.gitbook/assets/Disable_All_Magisk_Modules.zip" %}
{% endtab %}
{% endtabs %}



## 4. Удаление ADB командой

{% hint style="warning" %}
Прежде всего у вас должен быть установлен Platform Tools и драйвера для вашего смартфона. [`как все это сделать?`](use-adb-with-pc.md)
{% endhint %}

1. Оставьте ваше устройство в состоянии бутлупа
2. Подключите ваше устройство к ПК (желательно оригинальным кабелем)
3. Откройте командную строку в Platform Tools
4. Пропишите команду: `adb wait-for-device shell magisk --remove-modules`&#x20;
5. Если после введения команды  устройство не перезагрузилось, то сделайте это вручную
